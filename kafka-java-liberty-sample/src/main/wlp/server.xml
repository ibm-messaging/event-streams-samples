<!--
 * Copyright 2016 IBM
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
/**
 * Licensed Materials - Property of IBM
 * (c) Copyright IBM Corp. 2016
 */
 -->
<server>
    <applicationMonitor updateTrigger="polled" pollingRate="500ms"
                        dropins="dropins" dropinsEnabled="true"/>
                        
    <config updateTrigger="polled" monitorInterval="500ms"/>

    <featureManager>
        <feature>servlet-3.1</feature>
        <feature>appSecurity-2.0</feature>
        <feature>wsSecurity-1.1</feature>
    </featureManager>

    <library id="kafkaLoginLib">
        <fileset dir="${server.config.dir}/apps/MessageHubLibertyApp.war/WEB-INF/lib" includes="kafka-clients-*.jar"/>
    </library>

    <jaasLoginModule id="KafkaClient"
                className="org.apache.kafka.common.security.plain.PlainLoginModule"
                controlFlag="REQUIRED" libraryRef="kafkaLoginLib">
                
        <options serviceName="kafka" username="#USERNAME" password="#PASSWORD" />
    </jaasLoginModule>
    
    <jaasLoginContextEntry id="KafkaClient" name="KafkaClient" loginModuleRef="KafkaClient" />

    <httpEndpoint id="defaultHttpEndpoint"
                  host="*"
                  httpPort="9080">
        <tcpOptions soReuseAddr="true"/>
    </httpEndpoint>

    <application name="MessageHubLibertyApp" context-root="/" location="MessageHubLibertyApp.war" type="war"/>

</server>
